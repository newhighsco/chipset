@use '../hidpi' as *;

@import 'true';

@include test-module('hidpi()') {
  @include test('should default to a ratio of 1.3') {
    @include assert {
      @include output {
        .element-1 {
          @include hidpi() {
            color: #000;
          }
        }

        @include hidpi() {
          .element-2 {
            color: #000;
          }
        }
      }

      @include expect {
        @media (-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 124dpi) {
          .element-1 {
            color: #000;
          }
        }

        @media (-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 124dpi) {
          .element-2 {
            color: #000;
          }
        }
      }
    }
  }

  @include test('should accept a custom ratio') {
    @include assert {
      @include output {
        .element {
          @include hidpi(2) {
            color: #000;
          }
        }
      }

      @include expect {
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
          .element {
            color: #000;
          }
        }
      }
    }
  }
}
